{"version":3,"sources":["/Users/jamielynch/repos/bugsnag-react-native/examples/plain/node_modules/promise/setimmediate/rejection-tracking.js"],"sourcesContent":["'use strict';\n\nvar Promise = require('./core');\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._37 = null;\n  Promise._87 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._37 = function (promise) {\n    if (\n      promise._65 === 2 && // IS REJECTED\n      rejections[promise._51]\n    ) {\n      if (rejections[promise._51].logged) {\n        onHandled(promise._51);\n      } else {\n        clearTimeout(rejections[promise._51].timeout);\n      }\n      delete rejections[promise._51];\n    }\n  };\n  Promise._87 = function (promise, err) {\n    if (promise._40 === 0) { // not yet handled\n      promise._51 = id++;\n      rejections[promise._51] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._51),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}"],"names":["Promise","require","d","DEFAULT_WHITELIST","ReferenceError","TypeError","RangeError","enabled","disable","_37","_87","logError","id","error","console","warn","stack","split","forEach","line","matchWhitelist","list","some","cls","exports","enable","options","displayId","rejections","onUnhandled","allRejections","whitelist","logged","onHandled","promise","_65","_51","clearTimeout","timeout","err","_40","setTimeout","bind"],"mappings":"4BAAA,aAEA,IAAIA,EAAUC,EAAOC,EAAA,IAEjBC,GACFC,eACAC,UACAC,YAGEC,GAAU,EAEd,SAASC,IACPD,GAAU,EACVP,EAAQS,IAAM,KACdT,EAAQU,IAAM,KAqFhB,SAASC,EAASC,EAAIC,GACpBC,QAAQC,KAAK,6CAA+CH,EAAK,QACnDC,IAAUA,EAAMG,OAASH,IAAU,IAC1CI,MAAM,MAAMC,QAAQ,SAAUC,GACnCL,QAAQC,KAAK,KAAOI,KAIxB,SAASC,EAAeP,EAAOQ,GAC7B,OAAOA,EAAKC,KAAK,SAAUC,GACzB,OAAOV,aAAiBU,IAnG5BC,EAAQhB,QAAUA,EAOlBgB,EAAQC,OACR,SAAgBC,GACdA,EAAUA,MACNnB,GAASC,IACbD,GAAU,EACV,IAAIK,EAAK,EACLe,EAAY,EACZC,KAkCJ,SAASC,EAAYjB,IAEjBc,EAAQI,eACRV,EACEQ,EAAWhB,GAAIC,MACfa,EAAQK,WAAa5B,MAGvByB,EAAWhB,GAAIe,UAAYA,IACvBD,EAAQG,aACVD,EAAWhB,GAAIoB,QAAS,EACxBN,EAAQG,YACND,EAAWhB,GAAIe,UACfC,EAAWhB,GAAIC,SAGjBe,EAAWhB,GAAIoB,QAAS,EACxBrB,EACEiB,EAAWhB,GAAIe,UACfC,EAAWhB,GAAIC,SAKvB,SAASoB,EAAUrB,GACbgB,EAAWhB,GAAIoB,SACbN,EAAQO,UACVP,EAAQO,UAAUL,EAAWhB,GAAIe,UAAWC,EAAWhB,GAAIC,OACjDe,EAAWhB,GAAIiB,cACzBf,QAAQC,KACN,kCAAoCa,EAAWhB,GAAIe,UAAY,MAEjEb,QAAQC,KACN,gHACAa,EAAWhB,GAAIe,UAAY,OAnEnC3B,EAAQS,IAAM,SAAUyB,GAEJ,IAAhBA,EAAQC,KACRP,EAAWM,EAAQE,OAEfR,EAAWM,EAAQE,KAAKJ,OAC1BC,EAAUC,EAAQE,KAElBC,aAAaT,EAAWM,EAAQE,KAAKE,gBAEhCV,EAAWM,EAAQE,OAG9BpC,EAAQU,IAAM,SAAUwB,EAASK,GACX,IAAhBL,EAAQM,MACVN,EAAQE,IAAMxB,IACdgB,EAAWM,EAAQE,MACjBT,UAAW,KACXd,MAAO0B,EACPD,QAASG,WACPZ,EAAYa,KAAK,KAAMR,EAAQE,KAK/BhB,EAAemB,EAAKpC,GAChB,IACA,KAEN6B,QAAQ","file":"345.js"}