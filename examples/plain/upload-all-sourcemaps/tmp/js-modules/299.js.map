{"version":3,"sources":["/Users/jamielynch/repos/bugsnag-react-native/examples/plain/node_modules/react-native/Libraries/vendor/emitter/mixInEventEmitter.js"],"sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nconst EventEmitter = require('EventEmitter');\nconst EventEmitterWithHolding = require('EventEmitterWithHolding');\nconst EventHolder = require('EventHolder');\n\nconst invariant = require('fbjs/lib/invariant');\n/* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses an error\n * found when Flow v0.54 was deployed. To see the error delete this comment and\n * run Flow. */\nconst keyOf = require('fbjs/lib/keyOf');\n\nimport type EmitterSubscription from 'EmitterSubscription';\n\nconst TYPES_KEY = keyOf({__types: true});\n\n/**\n * API to setup an object or constructor to be able to emit data events.\n *\n * @example\n * function Dog() { ...dog stuff... }\n * mixInEventEmitter(Dog, {bark: true});\n *\n * var puppy = new Dog();\n * puppy.addListener('bark', function (volume) {\n *   console.log('Puppy', this, 'barked at volume:', volume);\n * });\n * puppy.emit('bark', 'quiet');\n * // Puppy <puppy> barked at volume: quiet\n *\n *\n * // A \"singleton\" object may also be commissioned:\n *\n * var Singleton = {};\n * mixInEventEmitter(Singleton, {lonely: true});\n * Singleton.emit('lonely', true);\n */\nfunction mixInEventEmitter(cls: Function | Object, types: Object) {\n  invariant(types, 'Must supply set of valid event types');\n\n  // If this is a constructor, write to the prototype, otherwise write to the\n  // singleton object.\n  const target = cls.prototype || cls;\n\n  invariant(!target.__eventEmitter, 'An active emitter is already mixed in');\n\n  const ctor = cls.constructor;\n  if (ctor) {\n    invariant(\n      ctor === Object || ctor === Function,\n      'Mix EventEmitter into a class, not an instance',\n    );\n  }\n\n  // Keep track of the provided types, union the types if they already exist,\n  // which allows for prototype subclasses to provide more types.\n  if (target.hasOwnProperty(TYPES_KEY)) {\n    Object.assign(target.__types, types);\n  } else if (target.__types) {\n    target.__types = Object.assign({}, target.__types, types);\n  } else {\n    target.__types = types;\n  }\n  Object.assign(target, EventEmitterMixin);\n}\n\nconst EventEmitterMixin = {\n  emit: function(eventType, a, b, c, d, e, _) {\n    return this.__getEventEmitter().emit(eventType, a, b, c, d, e, _);\n  },\n\n  emitAndHold: function(eventType, a, b, c, d, e, _) {\n    return this.__getEventEmitter().emitAndHold(eventType, a, b, c, d, e, _);\n  },\n\n  addListener: function(eventType, listener, context): EmitterSubscription {\n    return this.__getEventEmitter().addListener(eventType, listener, context);\n  },\n\n  once: function(eventType, listener, context) {\n    return this.__getEventEmitter().once(eventType, listener, context);\n  },\n\n  addRetroactiveListener: function(eventType, listener, context) {\n    return this.__getEventEmitter().addRetroactiveListener(\n      eventType,\n      listener,\n      context,\n    );\n  },\n\n  addListenerMap: function(listenerMap, context) {\n    return this.__getEventEmitter().addListenerMap(listenerMap, context);\n  },\n\n  addRetroactiveListenerMap: function(listenerMap, context) {\n    return this.__getEventEmitter().addListenerMap(listenerMap, context);\n  },\n\n  removeAllListeners: function() {\n    this.__getEventEmitter().removeAllListeners();\n  },\n\n  removeCurrentListener: function() {\n    this.__getEventEmitter().removeCurrentListener();\n  },\n\n  releaseHeldEventType: function(eventType) {\n    this.__getEventEmitter().releaseHeldEventType(eventType);\n  },\n\n  __getEventEmitter: function() {\n    if (!this.__eventEmitter) {\n      let emitter = new EventEmitter();\n      if (__DEV__) {\n        const EventValidator = require('EventValidator');\n        emitter = EventValidator.addValidation(emitter, this.__types);\n      }\n\n      const holder = new EventHolder();\n      this.__eventEmitter = new EventEmitterWithHolding(emitter, holder);\n    }\n    return this.__eventEmitter;\n  },\n};\n\nmodule.exports = mixInEventEmitter;\n"],"names":["EventEmitter","require","d","EventEmitterWithHolding","EventHolder","invariant","TYPES_KEY","keyOf","__types","EventEmitterMixin","emit","eventType","a","b","c","e","_","this","__getEventEmitter","emitAndHold","addListener","listener","context","once","addRetroactiveListener","addListenerMap","listenerMap","addRetroactiveListenerMap","removeAllListeners","removeCurrentListener","releaseHeldEventType","__eventEmitter","emitter","holder","module","exports","cls","types","target","prototype","ctor","constructor","Object","Function","hasOwnProperty","_extends"],"mappings":"4BAUA,2BAEMA,EAAeC,EAAOC,EAAA,IACtBC,EAA0BF,EAAOC,EAAA,IACjCE,EAAcH,EAAOC,EAAA,IAErBG,EAAYJ,EAAOC,EAAA,IAQnBI,EAJQL,EAAOC,EAAA,GAIHK,EAAOC,SAAS,IAoDlC,IAAMC,GACJC,KAAM,SAASC,EAAWC,EAAGC,EAAGC,EAAGZ,EAAGa,EAAGC,GACvC,OAAOC,KAAKC,oBAAoBR,KAAKC,EAAWC,EAAGC,EAAGC,EAAGZ,EAAGa,EAAGC,IAGjEG,YAAa,SAASR,EAAWC,EAAGC,EAAGC,EAAGZ,EAAGa,EAAGC,GAC9C,OAAOC,KAAKC,oBAAoBC,YAAYR,EAAWC,EAAGC,EAAGC,EAAGZ,EAAGa,EAAGC,IAGxEI,YAAa,SAAST,EAAWU,EAAUC,GACzC,OAAOL,KAAKC,oBAAoBE,YAAYT,EAAWU,EAAUC,IAGnEC,KAAM,SAASZ,EAAWU,EAAUC,GAClC,OAAOL,KAAKC,oBAAoBK,KAAKZ,EAAWU,EAAUC,IAG5DE,uBAAwB,SAASb,EAAWU,EAAUC,GACpD,OAAOL,KAAKC,oBAAoBM,uBAC9Bb,EACAU,EACAC,IAIJG,eAAgB,SAASC,EAAaJ,GACpC,OAAOL,KAAKC,oBAAoBO,eAAeC,EAAaJ,IAG9DK,0BAA2B,SAASD,EAAaJ,GAC/C,OAAOL,KAAKC,oBAAoBO,eAAeC,EAAaJ,IAG9DM,mBAAoB,WAClBX,KAAKC,oBAAoBU,sBAG3BC,sBAAuB,WACrBZ,KAAKC,oBAAoBW,yBAG3BC,qBAAsB,SAASnB,GAC7BM,KAAKC,oBAAoBY,qBAAqBnB,IAGhDO,kBAAmB,WACjB,IAAKD,KAAKc,eAAgB,CACxB,IAAIC,EAAU,IAAIhC,EAMZiC,EAAS,IAAI7B,EACnBa,KAAKc,eAAiB,IAAI5B,EAAwB6B,EAASC,GAE7D,OAAOhB,KAAKc,iBAIhBG,EAAOC,QAzFP,SAA2BC,EAAwBC,GACjDhC,EAAUgC,EAAO,wCAIjB,IAAMC,EAASF,EAAIG,WAAaH,EAEhC/B,GAAWiC,EAAOP,eAAgB,yCAElC,IAAMS,EAAOJ,EAAIK,YACbD,GACFnC,EACEmC,IAASE,QAAUF,IAASG,SAC5B,kDAMAL,EAAOM,eAAetC,GACxBuC,EAAcP,EAAO9B,QAAS6B,GACrBC,EAAO9B,QAChB8B,EAAO9B,QAAUqC,KAAkBP,EAAO9B,QAAS6B,GAEnDC,EAAO9B,QAAU6B,EAEnBQ,EAAcP,EAAQ7B","file":"299.js"}