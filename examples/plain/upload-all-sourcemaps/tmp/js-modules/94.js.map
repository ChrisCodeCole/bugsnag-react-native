{"version":3,"sources":["/Users/jamielynch/repos/bugsnag-react-native/examples/plain/node_modules/react-native/Libraries/Core/InitializeCore.js"],"sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n/* globals window: true */\n\n/**\n * Sets up global variables typical in most JavaScript environments.\n *\n *   1. Global timers (via `setTimeout` etc).\n *   2. Global console object.\n *   3. Hooks for printing stack traces with source maps.\n *\n * Leaves enough room in the environment for implementing your own:\n *\n *   1. Require system.\n *   2. Bridged modules.\n *\n */\n'use strict';\n\nconst {polyfillObjectProperty, polyfillGlobal} = require('PolyfillFunctions');\n\nif (global.GLOBAL === undefined) {\n  global.GLOBAL = global;\n}\n\nif (global.window === undefined) {\n  global.window = global;\n}\n\n// Set up collections\nconst _shouldPolyfillCollection = require('_shouldPolyfillES6Collection');\nif (_shouldPolyfillCollection('Map')) {\n  polyfillGlobal('Map', () => require('Map'));\n}\nif (_shouldPolyfillCollection('Set')) {\n  polyfillGlobal('Set', () => require('Set'));\n}\n\n// Set up process\nglobal.process = global.process || {};\nglobal.process.env = global.process.env || {};\nif (!global.process.env.NODE_ENV) {\n  global.process.env.NODE_ENV = __DEV__ ? 'development' : 'production';\n}\n\n// Setup the Systrace profiling hooks if necessary\nif (global.__RCTProfileIsProfiling) {\n  const Systrace = require('Systrace');\n  Systrace.installReactHook();\n  Systrace.setEnabled(true);\n}\n\n// Set up console\nconst ExceptionsManager = require('ExceptionsManager');\nExceptionsManager.installConsoleErrorReporter();\n\n// Set up error handler\nif (!global.__fbDisableExceptionsManager) {\n  const handleError = (e, isFatal) => {\n    try {\n      ExceptionsManager.handleException(e, isFatal);\n    } catch (ee) {\n      console.log('Failed to print error: ', ee.message);\n      throw e;\n    }\n  };\n\n  const ErrorUtils = require('ErrorUtils');\n  ErrorUtils.setGlobalHandler(handleError);\n}\n\n// Check for compatibility between the JS and native code\nconst ReactNativeVersionCheck = require('ReactNativeVersionCheck');\nReactNativeVersionCheck.checkVersions();\n\n// Set up Promise\n// The native Promise implementation throws the following error:\n// ERROR: Event loop not supported.\npolyfillGlobal('Promise', () => require('Promise'));\n\n// Set up regenerator.\npolyfillGlobal('regeneratorRuntime', () => {\n  // The require just sets up the global, so make sure when we first\n  // invoke it the global does not exist\n  delete global.regeneratorRuntime;\n  /* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses an\n   * error found when Flow v0.54 was deployed. To see the error delete this\n   * comment and run Flow. */\n  require('regenerator-runtime/runtime');\n  return global.regeneratorRuntime;\n});\n\n// Set up timers\nconst defineLazyTimer = name => {\n  polyfillGlobal(name, () => require('JSTimers')[name]);\n};\ndefineLazyTimer('setTimeout');\ndefineLazyTimer('setInterval');\ndefineLazyTimer('setImmediate');\ndefineLazyTimer('clearTimeout');\ndefineLazyTimer('clearInterval');\ndefineLazyTimer('clearImmediate');\ndefineLazyTimer('requestAnimationFrame');\ndefineLazyTimer('cancelAnimationFrame');\ndefineLazyTimer('requestIdleCallback');\ndefineLazyTimer('cancelIdleCallback');\n\n// Set up XHR\n// The native XMLHttpRequest in Chrome dev tools is CORS aware and won't\n// let you fetch anything from the internet\npolyfillGlobal('XMLHttpRequest', () => require('XMLHttpRequest'));\npolyfillGlobal('FormData', () => require('FormData'));\n\npolyfillGlobal('fetch', () => require('fetch').fetch);\npolyfillGlobal('Headers', () => require('fetch').Headers);\npolyfillGlobal('Request', () => require('fetch').Request);\npolyfillGlobal('Response', () => require('fetch').Response);\npolyfillGlobal('WebSocket', () => require('WebSocket'));\npolyfillGlobal('Blob', () => require('Blob'));\npolyfillGlobal('File', () => require('File'));\npolyfillGlobal('FileReader', () => require('FileReader'));\npolyfillGlobal('URL', () => require('URL'));\n\n// Set up alert\nif (!global.alert) {\n  global.alert = function(text) {\n    // Require Alert on demand. Requiring it too early can lead to issues\n    // with things like Platform not being fully initialized.\n    require('Alert').alert('Alert', '' + text);\n  };\n}\n\n// Set up Geolocation\nlet navigator = global.navigator;\nif (navigator === undefined) {\n  global.navigator = navigator = {};\n}\n\n// see https://github.com/facebook/react-native/issues/10881\npolyfillObjectProperty(navigator, 'product', () => 'ReactNative');\npolyfillObjectProperty(navigator, 'geolocation', () => require('Geolocation'));\n\n// Just to make sure the JS gets packaged up. Wait until the JS environment has\n// been initialized before requiring them.\nconst BatchedBridge = require('BatchedBridge');\nBatchedBridge.registerLazyCallableModule('Systrace', () => require('Systrace'));\nBatchedBridge.registerLazyCallableModule('JSTimers', () => require('JSTimers'));\nBatchedBridge.registerLazyCallableModule('HeapCapture', () =>\n  require('HeapCapture'),\n);\nBatchedBridge.registerLazyCallableModule('SamplingProfiler', () =>\n  require('SamplingProfiler'),\n);\nBatchedBridge.registerLazyCallableModule('RCTLog', () => require('RCTLog'));\nBatchedBridge.registerLazyCallableModule('RCTDeviceEventEmitter', () =>\n  require('RCTDeviceEventEmitter'),\n);\nBatchedBridge.registerLazyCallableModule('RCTNativeAppEventEmitter', () =>\n  require('RCTNativeAppEventEmitter'),\n);\nBatchedBridge.registerLazyCallableModule('PerformanceLogger', () =>\n  require('PerformanceLogger'),\n);\nBatchedBridge.registerLazyCallableModule('JSDevSupportModule', () =>\n  require('JSDevSupportModule'),\n);\n\nglobal.__fetchSegment = function(\n  segmentId: number,\n  options: {|+otaBuildNumber: ?string|},\n  callback: (?Error) => void,\n) {\n  const {SegmentFetcher} = require('NativeModules');\n  if (!SegmentFetcher) {\n    throw new Error(\n      'SegmentFetcher is missing. Please ensure that it is ' +\n        'included as a NativeModule.',\n    );\n  }\n\n  SegmentFetcher.fetchSegment(\n    segmentId,\n    options,\n    (errorObject: ?{message: string, code: string}) => {\n      if (errorObject) {\n        const error = new Error(errorObject.message);\n        (error: any).code = errorObject.code;\n        callback(error);\n      }\n\n      callback(null);\n    },\n  );\n};\n\n// Set up devtools\nif (__DEV__) {\n  if (!global.__RCTProfileIsProfiling) {\n    BatchedBridge.registerCallableModule('HMRClient', require('HMRClient'));\n\n    // not when debugging in chrome\n    // TODO(t12832058) This check is broken\n    if (!window.document) {\n      require('setupDevtools');\n    }\n\n    // Set up inspector\n    const JSInspector = require('JSInspector');\n    /* $FlowFixMe(>=0.56.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error found when Flow v0.56 was deployed. To see the error\n     * delete this comment and run Flow. */\n    JSInspector.registerAgent(require('NetworkAgent'));\n  }\n}\n"],"names":["require","d","polyfillObjectProperty","polyfillGlobal","undefined","global","GLOBAL","window","_shouldPolyfillCollection","process","env","NODE_ENV","__RCTProfileIsProfiling","Systrace","installReactHook","setEnabled","ExceptionsManager","installConsoleErrorReporter","__fbDisableExceptionsManager","setGlobalHandler","e","isFatal","handleException","ee","console","log","message","checkVersions","regeneratorRuntime","defineLazyTimer","name","fetch","Headers","Request","Response","alert","text","navigator","BatchedBridge","registerLazyCallableModule","__fetchSegment","segmentId","options","callback","SegmentFetcher","Error","fetchSegment","errorObject","error","code"],"mappings":"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","file":"94.js"}