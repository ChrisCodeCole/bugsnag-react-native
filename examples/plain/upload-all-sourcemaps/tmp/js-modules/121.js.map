{"version":3,"sources":["/Users/jamielynch/repos/bugsnag-react-native/examples/plain/node_modules/event-target-shim/lib/event-target.js"],"sourcesContent":["/**\n * @author Toru Nagashima\n * @copyright 2015 Toru Nagashima. All rights reserved.\n * See LICENSE file in root directory for full license.\n */\n\n\"use strict\";\n\n//-----------------------------------------------------------------------------\n// Requirements\n//-----------------------------------------------------------------------------\n\nvar Commons = require(\"./commons\");\nvar CustomEventTarget = require(\"./custom-event-target\");\nvar EventWrapper = require(\"./event-wrapper\");\nvar LISTENERS = Commons.LISTENERS;\nvar CAPTURE = Commons.CAPTURE;\nvar BUBBLE = Commons.BUBBLE;\nvar ATTRIBUTE = Commons.ATTRIBUTE;\nvar newNode = Commons.newNode;\nvar defineCustomEventTarget = CustomEventTarget.defineCustomEventTarget;\nvar createEventWrapper = EventWrapper.createEventWrapper;\nvar STOP_IMMEDIATE_PROPAGATION_FLAG =\n    EventWrapper.STOP_IMMEDIATE_PROPAGATION_FLAG;\n\n//-----------------------------------------------------------------------------\n// Constants\n//-----------------------------------------------------------------------------\n\n/**\n * A flag which shows there is the native `EventTarget` interface object.\n *\n * @type {boolean}\n * @private\n */\nvar HAS_EVENTTARGET_INTERFACE = (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n);\n\n//-----------------------------------------------------------------------------\n// Public Interface\n//-----------------------------------------------------------------------------\n\n/**\n * An implementation for `EventTarget` interface.\n *\n * @constructor\n * @public\n */\nvar EventTarget = module.exports = function EventTarget() {\n    if (this instanceof EventTarget) {\n        // this[LISTENERS] is a Map.\n        // Its key is event type.\n        // Its value is ListenerNode object or null.\n        //\n        // interface ListenerNode {\n        //     var listener: Function\n        //     var kind: CAPTURE|BUBBLE|ATTRIBUTE\n        //     var next: ListenerNode|null\n        // }\n        Object.defineProperty(this, LISTENERS, {value: Object.create(null)});\n    }\n    else if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(EventTarget, arguments[0]);\n    }\n    else if (arguments.length > 0) {\n        var types = Array(arguments.length);\n        for (var i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i];\n        }\n\n        // To use to extend with attribute listener properties.\n        // e.g.\n        //     class MyCustomObject extends EventTarget(\"message\", \"error\") {\n        //         //...\n        //     }\n        return defineCustomEventTarget(EventTarget, types);\n    }\n    else {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n};\n\nEventTarget.prototype = Object.create(\n    (HAS_EVENTTARGET_INTERFACE ? window.EventTarget : Object).prototype,\n    {\n        constructor: {\n            value: EventTarget,\n            writable: true,\n            configurable: true\n        },\n\n        addEventListener: {\n            value: function addEventListener(type, listener, capture) {\n                if (listener == null) {\n                    return false;\n                }\n                if (typeof listener !== \"function\" && typeof listener !== \"object\") {\n                    throw new TypeError(\"\\\"listener\\\" is not an object.\");\n                }\n\n                var kind = (capture ? CAPTURE : BUBBLE);\n                var node = this[LISTENERS][type];\n                if (node == null) {\n                    this[LISTENERS][type] = newNode(listener, kind);\n                    return true;\n                }\n\n                var prev = null;\n                while (node != null) {\n                    if (node.listener === listener && node.kind === kind) {\n                        // Should ignore a duplicated listener.\n                        return false;\n                    }\n                    prev = node;\n                    node = node.next;\n                }\n\n                prev.next = newNode(listener, kind);\n                return true;\n            },\n            configurable: true,\n            writable: true\n        },\n\n        removeEventListener: {\n            value: function removeEventListener(type, listener, capture) {\n                if (listener == null) {\n                    return false;\n                }\n\n                var kind = (capture ? CAPTURE : BUBBLE);\n                var prev = null;\n                var node = this[LISTENERS][type];\n                while (node != null) {\n                    if (node.listener === listener && node.kind === kind) {\n                        if (prev == null) {\n                            this[LISTENERS][type] = node.next;\n                        }\n                        else {\n                            prev.next = node.next;\n                        }\n                        return true;\n                    }\n\n                    prev = node;\n                    node = node.next;\n                }\n\n                return false;\n            },\n            configurable: true,\n            writable: true\n        },\n\n        dispatchEvent: {\n            value: function dispatchEvent(event) {\n                // If listeners aren't registered, terminate.\n                var node = this[LISTENERS][event.type];\n                if (node == null) {\n                    return true;\n                }\n\n                // Since we cannot rewrite several properties, so wrap object.\n                var wrapped = createEventWrapper(event, this);\n\n                // This doesn't process capturing phase and bubbling phase.\n                // This isn't participating in a tree.\n                while (node != null) {\n                    if (typeof node.listener === \"function\") {\n                        node.listener.call(this, wrapped);\n                    }\n                    else if (node.kind !== ATTRIBUTE && typeof node.listener.handleEvent === \"function\") {\n                        node.listener.handleEvent(wrapped);\n                    }\n\n                    if (wrapped[STOP_IMMEDIATE_PROPAGATION_FLAG]) {\n                        break;\n                    }\n                    node = node.next;\n                }\n\n                return !wrapped.defaultPrevented;\n            },\n            configurable: true,\n            writable: true\n        }\n    }\n);\n"],"names":["Commons","require","d","CustomEventTarget","EventWrapper","LISTENERS","CAPTURE","BUBBLE","ATTRIBUTE","newNode","defineCustomEventTarget","createEventWrapper","STOP_IMMEDIATE_PROPAGATION_FLAG","HAS_EVENTTARGET_INTERFACE","window","EventTarget","module","exports","this","arguments","length","Array","isArray","types","i","TypeError","Object","defineProperty","value","create","prototype","constructor","writable","configurable","addEventListener","type","listener","capture","kind","node","prev","next","removeEventListener","dispatchEvent","event","wrapped","call","handleEvent","defaultPrevented"],"mappings":"4BAMA,aAMA,IAAIA,EAAUC,EAAOC,EAAA,IACjBC,EAAoBF,EAAOC,EAAA,IAC3BE,EAAeH,EAAOC,EAAA,IACtBG,EAAYL,EAAQK,UACpBC,EAAUN,EAAQM,QAClBC,EAASP,EAAQO,OACjBC,EAAYR,EAAQQ,UACpBC,EAAUT,EAAQS,QAClBC,EAA0BP,EAAkBO,wBAC5CC,EAAqBP,EAAaO,mBAClCC,EACAR,EAAaQ,gCAYbC,EACkB,oBAAXC,aACuB,IAAvBA,OAAOC,YAadA,EAAcC,EAAOC,QAAU,SAASF,IACxC,KAAIG,gBAAgBH,GAYf,CAAA,GAAyB,IAArBI,UAAUC,QAAgBC,MAAMC,QAAQH,UAAU,IACvD,OAAOT,EAAwBK,EAAaI,UAAU,IAErD,GAAIA,UAAUC,OAAS,EAAG,CAE3B,IADA,IAAIG,EAAQF,MAAMF,UAAUC,QACnBI,EAAI,EAAGA,EAAIL,UAAUC,SAAUI,EACpCD,EAAMC,GAAKL,UAAUK,GAQzB,OAAOd,EAAwBK,EAAaQ,GAG5C,MAAM,IAAIE,UAAU,qCAnBpBC,OAAOC,eAAeT,KAAMb,GAAYuB,MAAOF,OAAOG,OAAO,SAuBrEd,EAAYe,UAAYJ,OAAOG,QAC1BhB,EAA4BC,OAAOC,YAAcW,QAAQI,WAEtDC,aACIH,MAAOb,EACPiB,UAAU,EACVC,cAAc,GAGlBC,kBACIN,MAAO,SAA0BO,EAAMC,EAAUC,GAC7C,GAAgB,MAAZD,EACA,OAAO,EAEX,GAAwB,mBAAbA,GAA+C,iBAAbA,EACzC,MAAM,IAAIX,UAAU,kCAGxB,IAAIa,EAAQD,EAAU/B,EAAUC,EAC5BgC,EAAOrB,KAAKb,GAAW8B,GAC3B,GAAY,MAARI,EAEA,OADArB,KAAKb,GAAW8B,GAAQ1B,EAAQ2B,EAAUE,IACnC,EAIX,IADA,IAAIE,EAAO,KACI,MAARD,GAAc,CACjB,GAAIA,EAAKH,WAAaA,GAAYG,EAAKD,OAASA,EAE5C,OAAO,EAEXE,EAAOD,EACPA,EAAOA,EAAKE,KAIhB,OADAD,EAAKC,KAAOhC,EAAQ2B,EAAUE,IACvB,GAEXL,cAAc,EACdD,UAAU,GAGdU,qBACId,MAAO,SAA6BO,EAAMC,EAAUC,GAChD,GAAgB,MAAZD,EACA,OAAO,EAMX,IAHA,IAAIE,EAAQD,EAAU/B,EAAUC,EAC5BiC,EAAO,KACPD,EAAOrB,KAAKb,GAAW8B,GACZ,MAARI,GAAc,CACjB,GAAIA,EAAKH,WAAaA,GAAYG,EAAKD,OAASA,EAO5C,OANY,MAARE,EACAtB,KAAKb,GAAW8B,GAAQI,EAAKE,KAG7BD,EAAKC,KAAOF,EAAKE,MAEd,EAGXD,EAAOD,EACPA,EAAOA,EAAKE,KAGhB,OAAO,GAEXR,cAAc,EACdD,UAAU,GAGdW,eACIf,MAAO,SAAuBgB,GAE1B,IAAIL,EAAOrB,KAAKb,GAAWuC,EAAMT,MACjC,GAAY,MAARI,EACA,OAAO,EAQX,IAJA,IAAIM,EAAUlC,EAAmBiC,EAAO1B,MAIzB,MAARqB,IAC0B,mBAAlBA,EAAKH,SACZG,EAAKH,SAASU,KAAK5B,KAAM2B,GAEpBN,EAAKD,OAAS9B,GAAkD,mBAA9B+B,EAAKH,SAASW,aACrDR,EAAKH,SAASW,YAAYF,IAG1BA,EAAQjC,KAGZ2B,EAAOA,EAAKE,KAGhB,OAAQI,EAAQG,kBAEpBf,cAAc,EACdD,UAAU","file":"121.js"}