{"version":3,"sources":["/Users/jamielynch/repos/bugsnag-react-native/examples/plain/node_modules/promise/setimmediate/core.js"],"sourcesContent":["'use strict';\n\n\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._40 = 0;\n  this._65 = 0;\n  this._55 = null;\n  this._72 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._37 = null;\nPromise._87 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._65 === 3) {\n    self = self._55;\n  }\n  if (Promise._37) {\n    Promise._37(self);\n  }\n  if (self._65 === 0) {\n    if (self._40 === 0) {\n      self._40 = 1;\n      self._72 = deferred;\n      return;\n    }\n    if (self._40 === 1) {\n      self._40 = 2;\n      self._72 = [self._72, deferred];\n      return;\n    }\n    self._72.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  setImmediate(function() {\n    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._65 === 1) {\n        resolve(deferred.promise, self._55);\n      } else {\n        reject(deferred.promise, self._55);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._55);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._65 = 3;\n      self._55 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._65 = 1;\n  self._55 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._65 = 2;\n  self._55 = newValue;\n  if (Promise._87) {\n    Promise._87(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._40 === 1) {\n    handle(self, self._72);\n    self._72 = null;\n  }\n  if (self._40 === 2) {\n    for (var i = 0; i < self._72.length; i++) {\n      handle(self, self._72[i]);\n    }\n    self._72 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n"],"names":["noop","LAST_ERROR","IS_ERROR","getThen","obj","then","ex","tryCallOne","fn","a","tryCallTwo","b","Promise","this","TypeError","_40","_65","_55","_72","doResolve","safeThen","self","onFulfilled","onRejected","constructor","resolve","reject","res","handle","Handler","deferred","_37","push","handleResolved","setImmediate","cb","ret","promise","newValue","finale","bind","_87","i","length","done","value","reason","module","exports","_61","prototype"],"mappings":"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","file":"112.js"}